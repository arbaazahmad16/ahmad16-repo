pipeline {
	agent any
	stages {
		stage("Jenkins Backup") {
			steps {
				sh '''
         				cd /var/lib
		 			gzip -r jenkins-backup.zip jenkins
   					'''
			}
		}
		stage("Upload into s3 bucket") {
			steps {
				script {
					s3Upload consoleLogLevel: 'INFO', dontSetBuildResultOnFailure: false, dontWaitForConcurrentBuildCompletion: false, entries: [[bucket: 'arbaaz-s3-bucket-9f9e514c9302f49a', excludedFile: '', flatten: false, gzipFiles: false, keepForever: false, managedArtifacts: false, noUploadOnFailure: false, selectedRegion: 'us-east-1', showDirectlyInBrowser: false, sourceFile: '/var/lib/jenkins', storageClass: 'STANDARD', uploadFromSlave: false, useServerSideEncryption: false]], pluginFailureResultConstraint: 'FAILURE', profileName: 's3-backup', userMetadata: []
				}
			}
		}
	}
}
